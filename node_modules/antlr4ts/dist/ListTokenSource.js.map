{"version":3,"file":"ListTokenSource.js","sourceRoot":"","sources":["../../src/ListTokenSource.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\n * Copyright 2016 The ANTLR Project. All rights reserved.\n * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.\n */\n\n// ConvertTo-TS run at 2016-10-04T11:26:52.1916955-07:00\n\nimport { CharStream } from \"./CharStream\";\nimport { CommonTokenFactory } from \"./CommonTokenFactory\";\nimport { NotNull, Override } from \"./Decorators\";\nimport { Token } from \"./Token\";\nimport { TokenFactory } from \"./TokenFactory\";\nimport { TokenSource } from \"./TokenSource\";\n\n/**\n * Provides an implementation of {@link TokenSource} as a wrapper around a list\n * of {@link Token} objects.\n *\n * If the final token in the list is an {@link Token#EOF} token, it will be used\n * as the EOF token for every call to {@link #nextToken} after the end of the\n * list is reached. Otherwise, an EOF token will be created.\n */\nexport class ListTokenSource implements TokenSource {\n\t/**\n\t * The wrapped collection of {@link Token} objects to return.\n\t */\n\tprotected tokens: Token[];\n\n\t/**\n\t * The name of the input source. If this value is `undefined`, a call to\n\t * {@link #getSourceName} should return the source name used to create the\n\t * the next token in {@link #tokens} (or the previous token if the end of\n\t * the input has been reached).\n\t */\n\tprivate _sourceName?: string;\n\n\t/**\n\t * The index into {@link #tokens} of token to return by the next call to\n\t * {@link #nextToken}. The end of the input is indicated by this value\n\t * being greater than or equal to the number of items in {@link #tokens}.\n\t */\n\tprotected i: number = 0;\n\n\t/**\n\t * This field caches the EOF token for the token source.\n\t */\n\tprotected eofToken?: Token;\n\n\t/**\n\t * This is the backing field for {@link #getTokenFactory} and\n\t * {@link setTokenFactory}.\n\t */\n\tprivate _factory: TokenFactory = CommonTokenFactory.DEFAULT;\n\n\t/**\n\t * Constructs a new {@link ListTokenSource} instance from the specified\n\t * collection of {@link Token} objects and source name.\n\t *\n\t * @param tokens The collection of {@link Token} objects to provide as a\n\t * {@link TokenSource}.\n\t * @param sourceName The name of the {@link TokenSource}. If this value is\n\t * `undefined`, {@link #getSourceName} will attempt to infer the name from\n\t * the next {@link Token} (or the previous token if the end of the input has\n\t * been reached).\n\t *\n\t * @exception NullPointerException if `tokens` is `undefined`\n\t */\n\tconstructor(@NotNull tokens: Token[], sourceName?: string) {\n\t\tif (tokens == null) {\n\t\t\tthrow new Error(\"tokens cannot be null\");\n\t\t}\n\n\t\tthis.tokens = tokens;\n\t\tthis._sourceName = sourceName;\n\t}\n\n\t/**\n\t * {@inheritDoc}\n\t */\n\t@Override\n\tget charPositionInLine(): number {\n\t\tif (this.i < this.tokens.length) {\n\t\t\treturn this.tokens[this.i].charPositionInLine;\n\t\t} else if (this.eofToken != null) {\n\t\t\treturn this.eofToken.charPositionInLine;\n\t\t} else if (this.tokens.length > 0) {\n\t\t\t// have to calculate the result from the line/column of the previous\n\t\t\t// token, along with the text of the token.\n\t\t\tlet lastToken: Token = this.tokens[this.tokens.length - 1];\n\t\t\tlet tokenText: string | undefined = lastToken.text;\n\t\t\tif (tokenText != null) {\n\t\t\t\tlet lastNewLine: number = tokenText.lastIndexOf(\"\\n\");\n\t\t\t\tif (lastNewLine >= 0) {\n\t\t\t\t\treturn tokenText.length - lastNewLine - 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn lastToken.charPositionInLine + lastToken.stopIndex - lastToken.startIndex + 1;\n\t\t}\n\n\t\t// only reach this if tokens is empty, meaning EOF occurs at the first\n\t\t// position in the input\n\t\treturn 0;\n\t}\n\n\t/**\n\t * {@inheritDoc}\n\t */\n\t@Override\n\tpublic nextToken(): Token {\n\t\tif (this.i >= this.tokens.length) {\n\t\t\tif (this.eofToken == null) {\n\t\t\t\tlet start: number = -1;\n\t\t\t\tif (this.tokens.length > 0) {\n\t\t\t\t\tlet previousStop: number = this.tokens[this.tokens.length - 1].stopIndex;\n\t\t\t\t\tif (previousStop !== -1) {\n\t\t\t\t\t\tstart = previousStop + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet stop: number = Math.max(-1, start - 1);\n\t\t\t\tthis.eofToken = this._factory.create({ source: this, stream: this.inputStream }, Token.EOF, \"EOF\", Token.DEFAULT_CHANNEL, start, stop, this.line, this.charPositionInLine);\n\t\t\t}\n\n\t\t\treturn this.eofToken;\n\t\t}\n\n\t\tlet t: Token = this.tokens[this.i];\n\t\tif (this.i === this.tokens.length - 1 && t.type === Token.EOF) {\n\t\t\tthis.eofToken = t;\n\t\t}\n\n\t\tthis.i++;\n\t\treturn t;\n\t}\n\n\t/**\n\t * {@inheritDoc}\n\t */\n\t@Override\n\tget line(): number {\n\t\tif (this.i < this.tokens.length) {\n\t\t\treturn this.tokens[this.i].line;\n\t\t} else if (this.eofToken != null) {\n\t\t\treturn this.eofToken.line;\n\t\t} else if (this.tokens.length > 0) {\n\t\t\t// have to calculate the result from the line/column of the previous\n\t\t\t// token, along with the text of the token.\n\t\t\tlet lastToken: Token = this.tokens[this.tokens.length - 1];\n\t\t\tlet line: number = lastToken.line;\n\n\t\t\tlet tokenText: string | undefined = lastToken.text;\n\t\t\tif (tokenText != null) {\n\t\t\t\tfor (let i = 0; i < tokenText.length; i++) {\n\t\t\t\t\tif (tokenText.charAt(i) === \"\\n\") {\n\t\t\t\t\t\tline++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if no text is available, assume the token did not contain any newline characters.\n\t\t\treturn line;\n\t\t}\n\n\t\t// only reach this if tokens is empty, meaning EOF occurs at the first\n\t\t// position in the input\n\t\treturn 1;\n\t}\n\n\t/**\n\t * {@inheritDoc}\n\t */\n\t@Override\n\tget inputStream(): CharStream | undefined {\n\t\tif (this.i < this.tokens.length) {\n\t\t\treturn this.tokens[this.i].inputStream;\n\t\t} else if (this.eofToken != null) {\n\t\t\treturn this.eofToken.inputStream;\n\t\t} else if (this.tokens.length > 0) {\n\t\t\treturn this.tokens[this.tokens.length - 1].inputStream;\n\t\t}\n\n\t\t// no input stream information is available\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * {@inheritDoc}\n\t */\n\t@Override\n\tget sourceName(): string {\n\t\tif (this._sourceName) {\n\t\t\treturn this._sourceName;\n\t\t}\n\n\t\tlet inputStream: CharStream | undefined = this.inputStream;\n\t\tif (inputStream != null) {\n\t\t\treturn inputStream.sourceName;\n\t\t}\n\n\t\treturn \"List\";\n\t}\n\n\t/**\n\t * {@inheritDoc}\n\t */\n\t// @Override\n\tset tokenFactory(@NotNull factory: TokenFactory) {\n\t\tthis._factory = factory;\n\t}\n\n\t/**\n\t * {@inheritDoc}\n\t */\n\t@Override\n\t@NotNull\n\tget tokenFactory(): TokenFactory {\n\t\treturn this._factory;\n\t}\n}\n"]}