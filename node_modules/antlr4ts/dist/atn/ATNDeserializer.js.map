{"version":3,"file":"ATNDeserializer.js","sourceRoot":"","sources":["../../../src/atn/ATNDeserializer.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\n * Copyright 2016 The ANTLR Project. All rights reserved.\n * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.\n */\n\n// ConvertTo-TS run at 2016-10-04T11:26:25.9683447-07:00\n\nimport { ActionTransition } from \"./ActionTransition\";\nimport { Array2DHashSet } from \"../misc/Array2DHashSet\";\nimport { ATN } from \"./ATN\";\nimport { ATNDeserializationOptions } from \"./ATNDeserializationOptions\";\nimport { ATNState } from \"./ATNState\";\nimport { ATNStateType } from \"./ATNStateType\";\nimport { ATNType } from \"./ATNType\";\nimport { AtomTransition } from \"./AtomTransition\";\nimport { BasicBlockStartState } from \"./BasicBlockStartState\";\nimport { BasicState } from \"./BasicState\";\nimport { BitSet } from \"../misc/BitSet\";\nimport { BlockEndState } from \"./BlockEndState\";\nimport { BlockStartState } from \"./BlockStartState\";\nimport { DecisionState } from \"./DecisionState\";\nimport { DFA } from \"../dfa/DFA\";\nimport { EpsilonTransition } from \"./EpsilonTransition\";\nimport { Interval } from \"../misc/Interval\";\nimport { IntervalSet } from \"../misc/IntervalSet\";\nimport { InvalidState } from \"./InvalidState\";\nimport { LexerAction } from \"./LexerAction\";\nimport { LexerActionType } from \"./LexerActionType\";\nimport { LexerChannelAction } from \"./LexerChannelAction\";\nimport { LexerCustomAction } from \"./LexerCustomAction\";\nimport { LexerModeAction } from \"./LexerModeAction\";\nimport { LexerMoreAction } from \"./LexerMoreAction\";\nimport { LexerPopModeAction } from \"./LexerPopModeAction\";\nimport { LexerPushModeAction } from \"./LexerPushModeAction\";\nimport { LexerSkipAction } from \"./LexerSkipAction\";\nimport { LexerTypeAction } from \"./LexerTypeAction\";\nimport { LoopEndState } from \"./LoopEndState\";\nimport { NotNull } from \"../Decorators\";\nimport { NotSetTransition } from \"./NotSetTransition\";\nimport { ParserATNSimulator } from \"./ParserATNSimulator\";\nimport { PlusBlockStartState } from \"./PlusBlockStartState\";\nimport { PlusLoopbackState } from \"./PlusLoopbackState\";\nimport { PrecedencePredicateTransition } from \"./PrecedencePredicateTransition\";\nimport { PredicateTransition } from \"./PredicateTransition\";\nimport { RangeTransition } from \"./RangeTransition\";\nimport { RuleStartState } from \"./RuleStartState\";\nimport { RuleStopState } from \"./RuleStopState\";\nimport { RuleTransition } from \"./RuleTransition\";\nimport { SetTransition } from \"./SetTransition\";\nimport { StarBlockStartState } from \"./StarBlockStartState\";\nimport { StarLoopbackState } from \"./StarLoopbackState\";\nimport { StarLoopEntryState } from \"./StarLoopEntryState\";\nimport { Token } from \"../Token\";\nimport { TokensStartState } from \"./TokensStartState\";\nimport { Transition } from \"./Transition\";\nimport { TransitionType } from \"./TransitionType\";\nimport { UUID } from \"../misc/UUID\";\nimport { WildcardTransition } from \"./WildcardTransition\";\n\ninterface UnicodeDeserializer {\n\t// Wrapper for readInt() or readInt32()\n\treadUnicode(data: Uint16Array, p: number): number;\n\n\t// Work around Java not allowing mutation of captured variables\n\t// by returning amount by which to increment p after each read\n\treadonly size: number;\n}\n\nconst enum UnicodeDeserializingMode {\n\tUNICODE_BMP,\n\tUNICODE_SMP,\n}\n\n/**\n *\n * @author Sam Harwell\n */\nexport class ATNDeserializer {\n\tstatic get SERIALIZED_VERSION(): number {\n\t\t/* This value should never change. Updates following this version are\n\t\t * reflected as change in the unique ID SERIALIZED_UUID.\n\t\t */\n\t\treturn 3;\n\t}\n\n\t/* WARNING: DO NOT MERGE THESE LINES. If UUIDs differ during a merge,\n\t * resolve the conflict by generating a new ID!\n\t */\n\n\t/**\n\t * This is the earliest supported serialized UUID.\n\t */\n\tprivate static readonly BASE_SERIALIZED_UUID: UUID = UUID.fromString(\"E4178468-DF95-44D0-AD87-F22A5D5FB6D3\");\n\t/**\n\t * This UUID indicates an extension of {@link #ADDED_PRECEDENCE_TRANSITIONS}\n\t * for the addition of lexer actions encoded as a sequence of\n\t * {@link LexerAction} instances.\n\t */\n\tprivate static readonly ADDED_LEXER_ACTIONS: UUID = UUID.fromString(\"AB35191A-1603-487E-B75A-479B831EAF6D\");\n\t/**\n\t * This UUID indicates the serialized ATN contains two sets of\n\t * IntervalSets, where the second set's values are encoded as\n\t * 32-bit integers to support the full Unicode SMP range up to U+10FFFF.\n\t */\n\tprivate static readonly ADDED_UNICODE_SMP: UUID = UUID.fromString(\"C23FEA89-0605-4f51-AFB8-058BCAB8C91B\");\n\t/**\n\t * This list contains all of the currently supported UUIDs, ordered by when\n\t * the feature first appeared in this branch.\n\t */\n\tprivate static readonly SUPPORTED_UUIDS: UUID[] = [\n\t\tATNDeserializer.BASE_SERIALIZED_UUID,\n\t\tATNDeserializer.ADDED_LEXER_ACTIONS,\n\t\tATNDeserializer.ADDED_UNICODE_SMP,\n\t];\n\n\t/**\n\t * This is the current serialized UUID.\n\t */\n\tprivate static readonly SERIALIZED_UUID: UUID = ATNDeserializer.ADDED_UNICODE_SMP;\n\n\t@NotNull\n\tprivate readonly deserializationOptions: ATNDeserializationOptions;\n\n\tconstructor(deserializationOptions?: ATNDeserializationOptions) {\n\t\tif (deserializationOptions == null) {\n\t\t\tdeserializationOptions = ATNDeserializationOptions.defaultOptions;\n\t\t}\n\n\t\tthis.deserializationOptions = deserializationOptions;\n\t}\n\n\t/**\n\t * Determines if a particular serialized representation of an ATN supports\n\t * a particular feature, identified by the {@link UUID} used for serializing\n\t * the ATN at the time the feature was first introduced.\n\t *\n\t * @param feature The {@link UUID} marking the first time the feature was\n\t * supported in the serialized ATN.\n\t * @param actualUuid The {@link UUID} of the actual serialized ATN which is\n\t * currently being deserialized.\n\t * @returns `true` if the `actualUuid` value represents a\n\t * serialized ATN at or after the feature identified by `feature` was\n\t * introduced; otherwise, `false`.\n\t */\n\tprotected static isFeatureSupported(feature: UUID, actualUuid: UUID): boolean {\n\t\tlet featureIndex: number = ATNDeserializer.SUPPORTED_UUIDS.findIndex((e) => e.equals(feature));\n\t\tif (featureIndex < 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn ATNDeserializer.SUPPORTED_UUIDS.findIndex((e) => e.equals(actualUuid)) >= featureIndex;\n\t}\n\n\tprivate static getUnicodeDeserializer(mode: UnicodeDeserializingMode): UnicodeDeserializer {\n\t\tif (mode === UnicodeDeserializingMode.UNICODE_BMP) {\n\t\t\treturn {\n\t\t\t\treadUnicode: (data: Uint16Array, p: number): number => {\n\t\t\t\t\treturn ATNDeserializer.toInt(data[p]);\n\t\t\t\t},\n\t\t\t\tsize: 1,\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\treadUnicode: (data: Uint16Array, p: number): number => {\n\t\t\t\t\treturn ATNDeserializer.toInt32(data, p);\n\t\t\t\t},\n\t\t\t\tsize: 2,\n\t\t\t};\n\t\t}\n\t}\n\n\tpublic deserialize(@NotNull data: Uint16Array): ATN {\n\t\tdata = data.slice(0);\n\n\t\t// Each Uint16 value in data is shifted by +2 at the entry to this method. This is an encoding optimization\n\t\t// targeting the serialized values 0 and -1 (serialized to 0xFFFF), each of which are very common in the\n\t\t// serialized form of the ATN. In the modified UTF-8 that Java uses for compiled string literals, these two\n\t\t// character values have multi-byte forms. By shifting each value by +2, they become characters 2 and 1 prior to\n\t\t// writing the string, each of which have single-byte representations. Since the shift occurs in the tool during\n\t\t// ATN serialization, each target is responsible for adjusting the values during deserialization.\n\t\t//\n\t\t// As a special case, note that the first element of data is not adjusted because it contains the major version\n\t\t// number of the serialized ATN, which was fixed at 3 at the time the value shifting was implemented.\n\t\tfor (let i = 1; i < data.length; i++) {\n\t\t\tdata[i] = (data[i] - 2) & 0xFFFF;\n\t\t}\n\n\t\tlet p: number = 0;\n\t\tlet version: number = ATNDeserializer.toInt(data[p++]);\n\t\tif (version !== ATNDeserializer.SERIALIZED_VERSION) {\n\t\t\tlet reason = `Could not deserialize ATN with version ${version} (expected ${ATNDeserializer.SERIALIZED_VERSION}).`;\n\t\t\tthrow new Error(reason);\n\t\t}\n\n\t\tlet uuid: UUID = ATNDeserializer.toUUID(data, p);\n\t\tp += 8;\n\t\tif (ATNDeserializer.SUPPORTED_UUIDS.findIndex((e) => e.equals(uuid)) < 0) {\n\t\t\tlet reason = `Could not deserialize ATN with UUID ${uuid} (expected ${ATNDeserializer.SERIALIZED_UUID} or a legacy UUID).`;\n\t\t\tthrow new Error(reason);\n\t\t}\n\n\t\tlet supportsLexerActions: boolean = ATNDeserializer.isFeatureSupported(ATNDeserializer.ADDED_LEXER_ACTIONS, uuid);\n\n\t\tlet grammarType: ATNType = ATNDeserializer.toInt(data[p++]);\n\t\tlet maxTokenType: number = ATNDeserializer.toInt(data[p++]);\n\t\tlet atn: ATN = new ATN(grammarType, maxTokenType);\n\n\t\t//\n\t\t// STATES\n\t\t//\n\t\tlet loopBackStateNumbers: Array<[LoopEndState, number]> = [];\n\t\tlet endStateNumbers: Array<[BlockStartState, number]> = [];\n\t\tlet nstates: number = ATNDeserializer.toInt(data[p++]);\n\t\tfor (let i = 0; i < nstates; i++) {\n\t\t\tlet stype: ATNStateType = ATNDeserializer.toInt(data[p++]);\n\t\t\t// ignore bad type of states\n\t\t\tif (stype === ATNStateType.INVALID_TYPE) {\n\t\t\t\tatn.addState(new InvalidState());\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet ruleIndex: number = ATNDeserializer.toInt(data[p++]);\n\t\t\tif (ruleIndex === 0xFFFF) {\n\t\t\t\truleIndex = -1;\n\t\t\t}\n\n\t\t\tlet s: ATNState = this.stateFactory(stype, ruleIndex);\n\t\t\tif (stype === ATNStateType.LOOP_END) { // special case\n\t\t\t\tlet loopBackStateNumber: number = ATNDeserializer.toInt(data[p++]);\n\t\t\t\tloopBackStateNumbers.push([s as LoopEndState, loopBackStateNumber]);\n\t\t\t}\n\t\t\telse if (s instanceof BlockStartState) {\n\t\t\t\tlet endStateNumber: number = ATNDeserializer.toInt(data[p++]);\n\t\t\t\tendStateNumbers.push([s, endStateNumber]);\n\t\t\t}\n\t\t\tatn.addState(s);\n\t\t}\n\n\t\t// delay the assignment of loop back and end states until we know all the state instances have been initialized\n\t\tfor (let pair of loopBackStateNumbers) {\n\t\t\tpair[0].loopBackState = atn.states[pair[1]];\n\t\t}\n\n\t\tfor (let pair of endStateNumbers) {\n\t\t\tpair[0].endState = atn.states[pair[1]] as BlockEndState;\n\t\t}\n\n\t\tlet numNonGreedyStates: number = ATNDeserializer.toInt(data[p++]);\n\t\tfor (let i = 0; i < numNonGreedyStates; i++) {\n\t\t\tlet stateNumber: number = ATNDeserializer.toInt(data[p++]);\n\t\t\t(atn.states[stateNumber] as DecisionState).nonGreedy = true;\n\t\t}\n\n\t\tlet numSllDecisions: number = ATNDeserializer.toInt(data[p++]);\n\t\tfor (let i = 0; i < numSllDecisions; i++) {\n\t\t\tlet stateNumber: number = ATNDeserializer.toInt(data[p++]);\n\t\t\t(atn.states[stateNumber] as DecisionState).sll = true;\n\t\t}\n\n\t\tlet numPrecedenceStates: number = ATNDeserializer.toInt(data[p++]);\n\t\tfor (let i = 0; i < numPrecedenceStates; i++) {\n\t\t\tlet stateNumber: number = ATNDeserializer.toInt(data[p++]);\n\t\t\t(atn.states[stateNumber] as RuleStartState).isPrecedenceRule = true;\n\t\t}\n\n\t\t//\n\t\t// RULES\n\t\t//\n\t\tlet nrules: number = ATNDeserializer.toInt(data[p++]);\n\t\tif (atn.grammarType === ATNType.LEXER) {\n\t\t\tatn.ruleToTokenType = new Int32Array(nrules);\n\t\t}\n\n\t\tatn.ruleToStartState = new Array<RuleStartState>(nrules);\n\t\tfor (let i = 0; i < nrules; i++) {\n\t\t\tlet s: number = ATNDeserializer.toInt(data[p++]);\n\t\t\tlet startState: RuleStartState = atn.states[s] as RuleStartState;\n\t\t\tstartState.leftFactored = ATNDeserializer.toInt(data[p++]) !== 0;\n\t\t\tatn.ruleToStartState[i] = startState;\n\t\t\tif (atn.grammarType === ATNType.LEXER) {\n\t\t\t\tlet tokenType: number = ATNDeserializer.toInt(data[p++]);\n\t\t\t\tif (tokenType === 0xFFFF) {\n\t\t\t\t\ttokenType = Token.EOF;\n\t\t\t\t}\n\n\t\t\t\tatn.ruleToTokenType[i] = tokenType;\n\n\t\t\t\tif (!ATNDeserializer.isFeatureSupported(ATNDeserializer.ADDED_LEXER_ACTIONS, uuid)) {\n\t\t\t\t\t// this piece of unused metadata was serialized prior to the\n\t\t\t\t\t// addition of LexerAction\n\t\t\t\t\tlet actionIndexIgnored: number = ATNDeserializer.toInt(data[p++]);\n\t\t\t\t\tif (actionIndexIgnored === 0xFFFF) {\n\t\t\t\t\t\tactionIndexIgnored = -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tatn.ruleToStopState = new Array<RuleStopState>(nrules);\n\t\tfor (let state of atn.states) {\n\t\t\tif (!(state instanceof RuleStopState)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tatn.ruleToStopState[state.ruleIndex] = state;\n\t\t\tatn.ruleToStartState[state.ruleIndex].stopState = state;\n\t\t}\n\n\t\t//\n\t\t// MODES\n\t\t//\n\t\tlet nmodes: number = ATNDeserializer.toInt(data[p++]);\n\t\tfor (let i = 0; i < nmodes; i++) {\n\t\t\tlet s: number = ATNDeserializer.toInt(data[p++]);\n\t\t\tatn.modeToStartState.push(atn.states[s] as TokensStartState);\n\t\t}\n\n\t\tatn.modeToDFA = new Array<DFA>(nmodes);\n\t\tfor (let i = 0; i < nmodes; i++) {\n\t\t\tatn.modeToDFA[i] = new DFA(atn.modeToStartState[i]);\n\t\t}\n\n\t\t//\n\t\t// SETS\n\t\t//\n\t\tlet sets: IntervalSet[] = [];\n\n\t\t// First, read all sets with 16-bit Unicode code points <= U+FFFF.\n\t\tp = this.deserializeSets(data, p, sets, ATNDeserializer.getUnicodeDeserializer(UnicodeDeserializingMode.UNICODE_BMP));\n\n\t\t// Next, if the ATN was serialized with the Unicode SMP feature,\n\t\t// deserialize sets with 32-bit arguments <= U+10FFFF.\n\t\tif (ATNDeserializer.isFeatureSupported(ATNDeserializer.ADDED_UNICODE_SMP, uuid)) {\n\t\t\tp = this.deserializeSets(data, p, sets, ATNDeserializer.getUnicodeDeserializer(UnicodeDeserializingMode.UNICODE_SMP));\n\t\t}\n\n\t\t//\n\t\t// EDGES\n\t\t//\n\t\tlet nedges: number = ATNDeserializer.toInt(data[p++]);\n\t\tfor (let i = 0; i < nedges; i++) {\n\t\t\tlet src: number = ATNDeserializer.toInt(data[p]);\n\t\t\tlet trg: number = ATNDeserializer.toInt(data[p + 1]);\n\t\t\tlet ttype: number = ATNDeserializer.toInt(data[p + 2]);\n\t\t\tlet arg1: number = ATNDeserializer.toInt(data[p + 3]);\n\t\t\tlet arg2: number = ATNDeserializer.toInt(data[p + 4]);\n\t\t\tlet arg3: number = ATNDeserializer.toInt(data[p + 5]);\n\t\t\tlet trans: Transition = this.edgeFactory(atn, ttype, src, trg, arg1, arg2, arg3, sets);\n\t\t\t// console.log(`EDGE ${trans.constructor.name} ${src}->${trg} ${Transition.serializationNames[ttype]} ${arg1},${arg2},${arg3}`);\n\t\t\tlet srcState: ATNState = atn.states[src];\n\t\t\tsrcState.addTransition(trans);\n\t\t\tp += 6;\n\t\t}\n\n\t\t// edges for rule stop states can be derived, so they aren't serialized\n\t\tinterface T { stopState: number; returnState: number; outermostPrecedenceReturn: number; }\n\t\tlet returnTransitionsSet = new Array2DHashSet<T>({\n\t\t\thashCode: (o: T) => o.stopState ^ o.returnState ^ o.outermostPrecedenceReturn,\n\n\t\t\tequals: (a: T, b: T): boolean => {\n\t\t\t\treturn a.stopState === b.stopState\n\t\t\t\t\t&& a.returnState === b.returnState\n\t\t\t\t\t&& a.outermostPrecedenceReturn === b.outermostPrecedenceReturn;\n\t\t\t},\n\t\t});\n\t\tlet returnTransitions: T[] = [];\n\t\tfor (let state of atn.states) {\n\t\t\tlet returningToLeftFactored: boolean = state.ruleIndex >= 0 && atn.ruleToStartState[state.ruleIndex].leftFactored;\n\t\t\tfor (let i = 0; i < state.numberOfTransitions; i++) {\n\t\t\t\tlet t: Transition = state.transition(i);\n\t\t\t\tif (!(t instanceof RuleTransition)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet ruleTransition: RuleTransition = t;\n\t\t\t\tlet returningFromLeftFactored: boolean = atn.ruleToStartState[ruleTransition.target.ruleIndex].leftFactored;\n\t\t\t\tif (!returningFromLeftFactored && returningToLeftFactored) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet outermostPrecedenceReturn: number = -1;\n\t\t\t\tif (atn.ruleToStartState[ruleTransition.target.ruleIndex].isPrecedenceRule) {\n\t\t\t\t\tif (ruleTransition.precedence === 0) {\n\t\t\t\t\t\toutermostPrecedenceReturn = ruleTransition.target.ruleIndex;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet current = { stopState: ruleTransition.target.ruleIndex, returnState: ruleTransition.followState.stateNumber, outermostPrecedenceReturn };\n\t\t\t\tif (returnTransitionsSet.add(current)) {\n\t\t\t\t\treturnTransitions.push(current);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add all elements from returnTransitions to the ATN\n\t\tfor (let returnTransition of returnTransitions) {\n\t\t\tlet transition = new EpsilonTransition(atn.states[returnTransition.returnState], returnTransition.outermostPrecedenceReturn);\n\t\t\tatn.ruleToStopState[returnTransition.stopState].addTransition(transition);\n\t\t}\n\n\t\tfor (let state of atn.states) {\n\t\t\tif (state instanceof BlockStartState) {\n\t\t\t\t// we need to know the end state to set its start state\n\t\t\t\tif (state.endState == null) {\n\t\t\t\t\tthrow new Error(\"IllegalStateException\");\n\t\t\t\t}\n\n\t\t\t\t// block end states can only be associated to a single block start state\n\t\t\t\tif (state.endState.startState != null) {\n\t\t\t\t\tthrow new Error(\"IllegalStateException\");\n\t\t\t\t}\n\n\t\t\t\tstate.endState.startState = state;\n\t\t\t}\n\n\t\t\tif (state instanceof PlusLoopbackState) {\n\t\t\t\tlet loopbackState: PlusLoopbackState = state;\n\t\t\t\tfor (let i = 0; i < loopbackState.numberOfTransitions; i++) {\n\t\t\t\t\tlet target: ATNState = loopbackState.transition(i).target;\n\t\t\t\t\tif (target instanceof PlusBlockStartState) {\n\t\t\t\t\t\ttarget.loopBackState = loopbackState;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (state instanceof StarLoopbackState) {\n\t\t\t\tlet loopbackState: StarLoopbackState = state;\n\t\t\t\tfor (let i = 0; i < loopbackState.numberOfTransitions; i++) {\n\t\t\t\t\tlet target: ATNState = loopbackState.transition(i).target;\n\t\t\t\t\tif (target instanceof StarLoopEntryState) {\n\t\t\t\t\t\ttarget.loopBackState = loopbackState;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\t// DECISIONS\n\t\t//\n\t\tlet ndecisions: number = ATNDeserializer.toInt(data[p++]);\n\t\tfor (let i = 1; i <= ndecisions; i++) {\n\t\t\tlet s: number = ATNDeserializer.toInt(data[p++]);\n\t\t\tlet decState: DecisionState = atn.states[s] as DecisionState;\n\t\t\tatn.decisionToState.push(decState);\n\t\t\tdecState.decision = i - 1;\n\t\t}\n\n\t\t//\n\t\t// LEXER ACTIONS\n\t\t//\n\t\tif (atn.grammarType === ATNType.LEXER) {\n\t\t\tif (supportsLexerActions) {\n\t\t\t\tatn.lexerActions = new Array<LexerAction>(ATNDeserializer.toInt(data[p++]));\n\t\t\t\tfor (let i = 0; i < atn.lexerActions.length; i++) {\n\t\t\t\t\tlet actionType: LexerActionType = ATNDeserializer.toInt(data[p++]);\n\t\t\t\t\tlet data1: number = ATNDeserializer.toInt(data[p++]);\n\t\t\t\t\tif (data1 === 0xFFFF) {\n\t\t\t\t\t\tdata1 = -1;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet data2: number = ATNDeserializer.toInt(data[p++]);\n\t\t\t\t\tif (data2 === 0xFFFF) {\n\t\t\t\t\t\tdata2 = -1;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet lexerAction: LexerAction = this.lexerActionFactory(actionType, data1, data2);\n\n\t\t\t\t\tatn.lexerActions[i] = lexerAction;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// for compatibility with older serialized ATNs, convert the old\n\t\t\t\t// serialized action index for action transitions to the new\n\t\t\t\t// form, which is the index of a LexerCustomAction\n\t\t\t\tlet legacyLexerActions: LexerAction[] = [];\n\t\t\t\tfor (let state of atn.states) {\n\t\t\t\t\tfor (let i = 0; i < state.numberOfTransitions; i++) {\n\t\t\t\t\t\tlet transition: Transition = state.transition(i);\n\t\t\t\t\t\tif (!(transition instanceof ActionTransition)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet ruleIndex: number = transition.ruleIndex;\n\t\t\t\t\t\tlet actionIndex: number = transition.actionIndex;\n\t\t\t\t\t\tlet lexerAction: LexerCustomAction = new LexerCustomAction(ruleIndex, actionIndex);\n\t\t\t\t\t\tstate.setTransition(i, new ActionTransition(transition.target, ruleIndex, legacyLexerActions.length, false));\n\t\t\t\t\t\tlegacyLexerActions.push(lexerAction);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tatn.lexerActions = legacyLexerActions;\n\t\t\t}\n\t\t}\n\n\t\tthis.markPrecedenceDecisions(atn);\n\n\t\tatn.decisionToDFA = new Array<DFA>(ndecisions);\n\t\tfor (let i = 0; i < ndecisions; i++) {\n\t\t\tatn.decisionToDFA[i] = new DFA(atn.decisionToState[i], i);\n\t\t}\n\n\t\tif (this.deserializationOptions.isVerifyATN) {\n\t\t\tthis.verifyATN(atn);\n\t\t}\n\n\t\tif (this.deserializationOptions.isGenerateRuleBypassTransitions && atn.grammarType === ATNType.PARSER) {\n\t\t\tatn.ruleToTokenType = new Int32Array(atn.ruleToStartState.length);\n\t\t\tfor (let i = 0; i < atn.ruleToStartState.length; i++) {\n\t\t\t\tatn.ruleToTokenType[i] = atn.maxTokenType + i + 1;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < atn.ruleToStartState.length; i++) {\n\t\t\t\tlet bypassStart: BasicBlockStartState = new BasicBlockStartState();\n\t\t\t\tbypassStart.ruleIndex = i;\n\t\t\t\tatn.addState(bypassStart);\n\n\t\t\t\tlet bypassStop: BlockEndState = new BlockEndState();\n\t\t\t\tbypassStop.ruleIndex = i;\n\t\t\t\tatn.addState(bypassStop);\n\n\t\t\t\tbypassStart.endState = bypassStop;\n\t\t\t\tatn.defineDecisionState(bypassStart);\n\n\t\t\t\tbypassStop.startState = bypassStart;\n\n\t\t\t\tlet endState: ATNState | undefined;\n\t\t\t\tlet excludeTransition: Transition | undefined;\n\t\t\t\tif (atn.ruleToStartState[i].isPrecedenceRule) {\n\t\t\t\t\t// wrap from the beginning of the rule to the StarLoopEntryState\n\t\t\t\t\tendState = undefined;\n\t\t\t\t\tfor (let state of atn.states) {\n\t\t\t\t\t\tif (state.ruleIndex !== i) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!(state instanceof StarLoopEntryState)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet maybeLoopEndState: ATNState = state.transition(state.numberOfTransitions - 1).target;\n\t\t\t\t\t\tif (!(maybeLoopEndState instanceof LoopEndState)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (maybeLoopEndState.epsilonOnlyTransitions && maybeLoopEndState.transition(0).target instanceof RuleStopState) {\n\t\t\t\t\t\t\tendState = state;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!endState) {\n\t\t\t\t\t\tthrow new Error(\"Couldn't identify final state of the precedence rule prefix section.\");\n\t\t\t\t\t}\n\n\t\t\t\t\texcludeTransition = (endState as StarLoopEntryState).loopBackState.transition(0);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tendState = atn.ruleToStopState[i];\n\t\t\t\t}\n\n\t\t\t\t// all non-excluded transitions that currently target end state need to target blockEnd instead\n\t\t\t\tfor (let state of atn.states) {\n\t\t\t\t\tfor (let i = 0; i < state.numberOfTransitions; i++) {\n\t\t\t\t\t\tlet transition = state.transition(i);\n\t\t\t\t\t\tif (transition === excludeTransition) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (transition.target === endState) {\n\t\t\t\t\t\t\ttransition.target = bypassStop;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// all transitions leaving the rule start state need to leave blockStart instead\n\t\t\t\twhile (atn.ruleToStartState[i].numberOfTransitions > 0) {\n\t\t\t\t\tlet transition: Transition = atn.ruleToStartState[i].removeTransition(atn.ruleToStartState[i].numberOfTransitions - 1);\n\t\t\t\t\tbypassStart.addTransition(transition);\n\t\t\t\t}\n\n\t\t\t\t// link the new states\n\t\t\t\tatn.ruleToStartState[i].addTransition(new EpsilonTransition(bypassStart));\n\t\t\t\tbypassStop.addTransition(new EpsilonTransition(endState));\n\n\t\t\t\tlet matchState: ATNState = new BasicState();\n\t\t\t\tatn.addState(matchState);\n\t\t\t\tmatchState.addTransition(new AtomTransition(bypassStop, atn.ruleToTokenType[i]));\n\t\t\t\tbypassStart.addTransition(new EpsilonTransition(matchState));\n\t\t\t}\n\n\t\t\tif (this.deserializationOptions.isVerifyATN) {\n\t\t\t\t// reverify after modification\n\t\t\t\tthis.verifyATN(atn);\n\t\t\t}\n\t\t}\n\n\t\tif (this.deserializationOptions.isOptimize) {\n\t\t\twhile (true) {\n\t\t\t\tlet optimizationCount: number = 0;\n\t\t\t\toptimizationCount += ATNDeserializer.inlineSetRules(atn);\n\t\t\t\toptimizationCount += ATNDeserializer.combineChainedEpsilons(atn);\n\t\t\t\tlet preserveOrder: boolean = atn.grammarType === ATNType.LEXER;\n\t\t\t\toptimizationCount += ATNDeserializer.optimizeSets(atn, preserveOrder);\n\t\t\t\tif (optimizationCount === 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.deserializationOptions.isVerifyATN) {\n\t\t\t\t// reverify after modification\n\t\t\t\tthis.verifyATN(atn);\n\t\t\t}\n\t\t}\n\n\t\tATNDeserializer.identifyTailCalls(atn);\n\n\t\treturn atn;\n\t}\n\n\tprivate deserializeSets(data: Uint16Array, p: number, sets: IntervalSet[], unicodeDeserializer: UnicodeDeserializer): number {\n\t\tlet nsets: number = ATNDeserializer.toInt(data[p++]);\n\t\tfor (let i = 0; i < nsets; i++) {\n\t\t\tlet nintervals: number = ATNDeserializer.toInt(data[p]);\n\t\t\tp++;\n\t\t\tlet set: IntervalSet = new IntervalSet();\n\t\t\tsets.push(set);\n\n\t\t\tlet containsEof: boolean = ATNDeserializer.toInt(data[p++]) !== 0;\n\t\t\tif (containsEof) {\n\t\t\t\tset.add(-1);\n\t\t\t}\n\n\t\t\tfor (let j: number = 0; j < nintervals; j++) {\n\t\t\t\tlet a: number = unicodeDeserializer.readUnicode(data, p);\n\t\t\t\tp += unicodeDeserializer.size;\n\t\t\t\tlet b: number = unicodeDeserializer.readUnicode(data, p);\n\t\t\t\tp += unicodeDeserializer.size;\n\t\t\t\tset.add(a, b);\n\t\t\t}\n\t\t}\n\n\t\treturn p;\n\t}\n\n\t/**\n\t * Analyze the {@link StarLoopEntryState} states in the specified ATN to set\n\t * the {@link StarLoopEntryState#precedenceRuleDecision} field to the\n\t * correct value.\n\t *\n\t * @param atn The ATN.\n\t */\n\tprotected markPrecedenceDecisions(@NotNull atn: ATN): void {\n\t\t// Map rule index -> precedence decision for that rule\n\t\tlet rulePrecedenceDecisions = new Map<number, StarLoopEntryState>();\n\n\t\tfor (let state of atn.states) {\n\t\t\tif (!(state instanceof StarLoopEntryState)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t/* We analyze the ATN to determine if this ATN decision state is the\n\t\t\t * decision for the closure block that determines whether a\n\t\t\t * precedence rule should continue or complete.\n\t\t\t */\n\t\t\tif (atn.ruleToStartState[state.ruleIndex].isPrecedenceRule) {\n\t\t\t\tlet maybeLoopEndState: ATNState = state.transition(state.numberOfTransitions - 1).target;\n\t\t\t\tif (maybeLoopEndState instanceof LoopEndState) {\n\t\t\t\t\tif (maybeLoopEndState.epsilonOnlyTransitions && maybeLoopEndState.transition(0).target instanceof RuleStopState) {\n\t\t\t\t\t\trulePrecedenceDecisions.set(state.ruleIndex, state);\n\t\t\t\t\t\tstate.precedenceRuleDecision = true;\n\t\t\t\t\t\tstate.precedenceLoopbackStates = new BitSet(atn.states.length);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// After marking precedence decisions, we go back through and fill in\n\t\t// StarLoopEntryState.precedenceLoopbackStates.\n\t\tfor (let precedenceDecision of rulePrecedenceDecisions) {\n\t\t\tfor (let transition of atn.ruleToStopState[precedenceDecision[0]].getTransitions()) {\n\t\t\t\tif (transition.serializationType !== TransitionType.EPSILON) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet epsilonTransition = transition as EpsilonTransition;\n\t\t\t\tif (epsilonTransition.outermostPrecedenceReturn !== -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tprecedenceDecision[1].precedenceLoopbackStates.set(transition.target.stateNumber);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected verifyATN(atn: ATN): void {\n\t\t// verify assumptions\n\t\tfor (let state of atn.states) {\n\t\t\tthis.checkCondition(state != null, \"ATN states should not be null.\");\n\t\t\tif (state.stateType === ATNStateType.INVALID_TYPE) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.checkCondition(state.onlyHasEpsilonTransitions || state.numberOfTransitions <= 1);\n\n\t\t\tif (state instanceof PlusBlockStartState) {\n\t\t\t\tthis.checkCondition(state.loopBackState != null);\n\t\t\t}\n\n\t\t\tif (state instanceof StarLoopEntryState) {\n\t\t\t\tlet starLoopEntryState: StarLoopEntryState = state;\n\t\t\t\tthis.checkCondition(starLoopEntryState.loopBackState != null);\n\t\t\t\tthis.checkCondition(starLoopEntryState.numberOfTransitions === 2);\n\n\t\t\t\tif (starLoopEntryState.transition(0).target instanceof StarBlockStartState) {\n\t\t\t\t\tthis.checkCondition(starLoopEntryState.transition(1).target instanceof LoopEndState);\n\t\t\t\t\tthis.checkCondition(!starLoopEntryState.nonGreedy);\n\t\t\t\t}\n\t\t\t\telse if (starLoopEntryState.transition(0).target instanceof LoopEndState) {\n\t\t\t\t\tthis.checkCondition(starLoopEntryState.transition(1).target instanceof StarBlockStartState);\n\t\t\t\t\tthis.checkCondition(starLoopEntryState.nonGreedy);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new Error(\"IllegalStateException\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (state instanceof StarLoopbackState) {\n\t\t\t\tthis.checkCondition(state.numberOfTransitions === 1);\n\t\t\t\tthis.checkCondition(state.transition(0).target instanceof StarLoopEntryState);\n\t\t\t}\n\n\t\t\tif (state instanceof LoopEndState) {\n\t\t\t\tthis.checkCondition(state.loopBackState != null);\n\t\t\t}\n\n\t\t\tif (state instanceof RuleStartState) {\n\t\t\t\tthis.checkCondition(state.stopState != null);\n\t\t\t}\n\n\t\t\tif (state instanceof BlockStartState) {\n\t\t\t\tthis.checkCondition(state.endState != null);\n\t\t\t}\n\n\t\t\tif (state instanceof BlockEndState) {\n\t\t\t\tthis.checkCondition(state.startState != null);\n\t\t\t}\n\n\t\t\tif (state instanceof DecisionState) {\n\t\t\t\tlet decisionState: DecisionState = state;\n\t\t\t\tthis.checkCondition(decisionState.numberOfTransitions <= 1 || decisionState.decision >= 0);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.checkCondition(state.numberOfTransitions <= 1 || state instanceof RuleStopState);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected checkCondition(condition: boolean, message?: string): void {\n\t\tif (!condition) {\n\t\t\tthrow new Error(\"IllegalStateException: \" + message);\n\t\t}\n\t}\n\n\tprivate static inlineSetRules(atn: ATN): number {\n\t\tlet inlinedCalls: number = 0;\n\n\t\tlet ruleToInlineTransition: Transition[] = new Array<Transition>(atn.ruleToStartState.length);\n\t\tfor (let i = 0; i < atn.ruleToStartState.length; i++) {\n\t\t\tlet startState: RuleStartState = atn.ruleToStartState[i];\n\t\t\tlet middleState: ATNState = startState;\n\t\t\twhile (middleState.onlyHasEpsilonTransitions\n\t\t\t\t&& middleState.numberOfOptimizedTransitions === 1\n\t\t\t\t&& middleState.getOptimizedTransition(0).serializationType === TransitionType.EPSILON) {\n\t\t\t\tmiddleState = middleState.getOptimizedTransition(0).target;\n\t\t\t}\n\n\t\t\tif (middleState.numberOfOptimizedTransitions !== 1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet matchTransition: Transition = middleState.getOptimizedTransition(0);\n\t\t\tlet matchTarget: ATNState = matchTransition.target;\n\t\t\tif (matchTransition.isEpsilon\n\t\t\t\t|| !matchTarget.onlyHasEpsilonTransitions\n\t\t\t\t|| matchTarget.numberOfOptimizedTransitions !== 1\n\t\t\t\t|| !(matchTarget.getOptimizedTransition(0).target instanceof RuleStopState)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tswitch (matchTransition.serializationType) {\n\t\t\tcase TransitionType.ATOM:\n\t\t\tcase TransitionType.RANGE:\n\t\t\tcase TransitionType.SET:\n\t\t\t\truleToInlineTransition[i] = matchTransition;\n\t\t\t\tbreak;\n\n\t\t\tcase TransitionType.NOT_SET:\n\t\t\tcase TransitionType.WILDCARD:\n\t\t\t\t// not implemented yet\n\t\t\t\tcontinue;\n\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\tfor (let state of atn.states) {\n\t\t\tif (state.ruleIndex < 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet optimizedTransitions: Transition[] | undefined;\n\t\t\tfor (let i = 0; i < state.numberOfOptimizedTransitions; i++) {\n\t\t\t\tlet transition: Transition = state.getOptimizedTransition(i);\n\t\t\t\tif (!(transition instanceof RuleTransition)) {\n\t\t\t\t\tif (optimizedTransitions != null) {\n\t\t\t\t\t\toptimizedTransitions.push(transition);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet ruleTransition: RuleTransition = transition;\n\t\t\t\tlet effective: Transition = ruleToInlineTransition[ruleTransition.target.ruleIndex];\n\t\t\t\tif (effective == null) {\n\t\t\t\t\tif (optimizedTransitions != null) {\n\t\t\t\t\t\toptimizedTransitions.push(transition);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (optimizedTransitions == null) {\n\t\t\t\t\toptimizedTransitions = [];\n\t\t\t\t\tfor (let j = 0; j < i; j++) {\n\t\t\t\t\t\toptimizedTransitions.push(state.getOptimizedTransition(i));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tinlinedCalls++;\n\t\t\t\tlet target: ATNState = ruleTransition.followState;\n\t\t\t\tlet intermediateState: ATNState = new BasicState();\n\t\t\t\tintermediateState.setRuleIndex(target.ruleIndex);\n\t\t\t\tatn.addState(intermediateState);\n\t\t\t\toptimizedTransitions.push(new EpsilonTransition(intermediateState));\n\n\t\t\t\tswitch (effective.serializationType) {\n\t\t\t\tcase TransitionType.ATOM:\n\t\t\t\t\tintermediateState.addTransition(new AtomTransition(target, (effective as AtomTransition)._label));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TransitionType.RANGE:\n\t\t\t\t\tintermediateState.addTransition(new RangeTransition(target, (effective as RangeTransition).from, (effective as RangeTransition).to));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TransitionType.SET:\n\t\t\t\t\tintermediateState.addTransition(new SetTransition(target, (effective as SetTransition).label));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"UnsupportedOperationException\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (optimizedTransitions != null) {\n\t\t\t\tif (state.isOptimized) {\n\t\t\t\t\twhile (state.numberOfOptimizedTransitions > 0) {\n\t\t\t\t\t\tstate.removeOptimizedTransition(state.numberOfOptimizedTransitions - 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (let transition of optimizedTransitions) {\n\t\t\t\t\tstate.addOptimizedTransition(transition);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (ParserATNSimulator.debug) {\n\t\t\tconsole.log(\"ATN runtime optimizer removed \" + inlinedCalls + \" rule invocations by inlining sets.\");\n\t\t}\n\n\t\treturn inlinedCalls;\n\t}\n\n\tprivate static combineChainedEpsilons(atn: ATN): number {\n\t\tlet removedEdges: number = 0;\n\n\t\tfor (let state of atn.states) {\n\t\t\tif (!state.onlyHasEpsilonTransitions || state instanceof RuleStopState) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet optimizedTransitions: Transition[] | undefined;\n\t\t\tnextTransition:\n\t\t\tfor (let i = 0; i < state.numberOfOptimizedTransitions; i++) {\n\t\t\t\tlet transition: Transition = state.getOptimizedTransition(i);\n\t\t\t\tlet intermediate: ATNState = transition.target;\n\t\t\t\tif (transition.serializationType !== TransitionType.EPSILON\n\t\t\t\t\t|| (transition as EpsilonTransition).outermostPrecedenceReturn !== -1\n\t\t\t\t\t|| intermediate.stateType !== ATNStateType.BASIC\n\t\t\t\t\t|| !intermediate.onlyHasEpsilonTransitions) {\n\t\t\t\t\tif (optimizedTransitions != null) {\n\t\t\t\t\t\toptimizedTransitions.push(transition);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue nextTransition;\n\t\t\t\t}\n\n\t\t\t\tfor (let j = 0; j < intermediate.numberOfOptimizedTransitions; j++) {\n\t\t\t\t\tif (intermediate.getOptimizedTransition(j).serializationType !== TransitionType.EPSILON\n\t\t\t\t\t\t|| (intermediate.getOptimizedTransition(j) as EpsilonTransition).outermostPrecedenceReturn !== -1) {\n\t\t\t\t\t\tif (optimizedTransitions != null) {\n\t\t\t\t\t\t\toptimizedTransitions.push(transition);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontinue nextTransition;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tremovedEdges++;\n\t\t\t\tif (optimizedTransitions == null) {\n\t\t\t\t\toptimizedTransitions = [];\n\t\t\t\t\tfor (let j = 0; j < i; j++) {\n\t\t\t\t\t\toptimizedTransitions.push(state.getOptimizedTransition(j));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (let j = 0; j < intermediate.numberOfOptimizedTransitions; j++) {\n\t\t\t\t\tlet target: ATNState = intermediate.getOptimizedTransition(j).target;\n\t\t\t\t\toptimizedTransitions.push(new EpsilonTransition(target));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (optimizedTransitions != null) {\n\t\t\t\tif (state.isOptimized) {\n\t\t\t\t\twhile (state.numberOfOptimizedTransitions > 0) {\n\t\t\t\t\t\tstate.removeOptimizedTransition(state.numberOfOptimizedTransitions - 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (let transition of optimizedTransitions) {\n\t\t\t\t\tstate.addOptimizedTransition(transition);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (ParserATNSimulator.debug) {\n\t\t\tconsole.log(\"ATN runtime optimizer removed \" + removedEdges + \" transitions by combining chained epsilon transitions.\");\n\t\t}\n\n\t\treturn removedEdges;\n\t}\n\n\tprivate static optimizeSets(atn: ATN, preserveOrder: boolean): number {\n\t\tif (preserveOrder) {\n\t\t\t// this optimization currently doesn't preserve edge order.\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet removedPaths: number = 0;\n\t\tlet decisions: DecisionState[] = atn.decisionToState;\n\t\tfor (let decision of decisions) {\n\t\t\tlet setTransitions: IntervalSet = new IntervalSet();\n\t\t\tfor (let i = 0; i < decision.numberOfOptimizedTransitions; i++) {\n\t\t\t\tlet epsTransition: Transition = decision.getOptimizedTransition(i);\n\t\t\t\tif (!(epsTransition instanceof EpsilonTransition)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (epsTransition.target.numberOfOptimizedTransitions !== 1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet transition: Transition = epsTransition.target.getOptimizedTransition(0);\n\t\t\t\tif (!(transition.target instanceof BlockEndState)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (transition instanceof NotSetTransition) {\n\t\t\t\t\t// TODO: not yet implemented\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (transition instanceof AtomTransition\n\t\t\t\t\t|| transition instanceof RangeTransition\n\t\t\t\t\t|| transition instanceof SetTransition) {\n\t\t\t\t\tsetTransitions.add(i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (setTransitions.size <= 1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet optimizedTransitions: Transition[] = [];\n\t\t\tfor (let i = 0; i < decision.numberOfOptimizedTransitions; i++) {\n\t\t\t\tif (!setTransitions.contains(i)) {\n\t\t\t\t\toptimizedTransitions.push(decision.getOptimizedTransition(i));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet blockEndState: ATNState = decision.getOptimizedTransition(setTransitions.minElement).target.getOptimizedTransition(0).target;\n\t\t\tlet matchSet: IntervalSet = new IntervalSet();\n\t\t\tfor (let interval of setTransitions.intervals) {\n\t\t\t\tfor (let j = interval.a; j <= interval.b; j++) {\n\t\t\t\t\tlet matchTransition: Transition = decision.getOptimizedTransition(j).target.getOptimizedTransition(0);\n\t\t\t\t\tif (matchTransition instanceof NotSetTransition) {\n\t\t\t\t\t\tthrow new Error(\"Not yet implemented.\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatchSet.addAll(matchTransition.label as IntervalSet);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet newTransition: Transition;\n\t\t\tif (matchSet.intervals.length === 1) {\n\t\t\t\tif (matchSet.size === 1) {\n\t\t\t\t\tnewTransition = new AtomTransition(blockEndState, matchSet.minElement);\n\t\t\t\t} else {\n\t\t\t\t\tlet matchInterval: Interval = matchSet.intervals[0];\n\t\t\t\t\tnewTransition = new RangeTransition(blockEndState, matchInterval.a, matchInterval.b);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewTransition = new SetTransition(blockEndState, matchSet);\n\t\t\t}\n\n\t\t\tlet setOptimizedState: ATNState = new BasicState();\n\t\t\tsetOptimizedState.setRuleIndex(decision.ruleIndex);\n\t\t\tatn.addState(setOptimizedState);\n\n\t\t\tsetOptimizedState.addTransition(newTransition);\n\t\t\toptimizedTransitions.push(new EpsilonTransition(setOptimizedState));\n\n\t\t\tremovedPaths += decision.numberOfOptimizedTransitions - optimizedTransitions.length;\n\n\t\t\tif (decision.isOptimized) {\n\t\t\t\twhile (decision.numberOfOptimizedTransitions > 0) {\n\t\t\t\t\tdecision.removeOptimizedTransition(decision.numberOfOptimizedTransitions - 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let transition of optimizedTransitions) {\n\t\t\t\tdecision.addOptimizedTransition(transition);\n\t\t\t}\n\t\t}\n\n\t\tif (ParserATNSimulator.debug) {\n\t\t\tconsole.log(\"ATN runtime optimizer removed \" + removedPaths + \" paths by collapsing sets.\");\n\t\t}\n\n\t\treturn removedPaths;\n\t}\n\n\tprivate static identifyTailCalls(atn: ATN): void {\n\t\tfor (let state of atn.states) {\n\t\t\tfor (let i = 0; i < state.numberOfTransitions; i++) {\n\t\t\t\tlet transition = state.transition(i);\n\t\t\t\tif (!(transition instanceof RuleTransition)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttransition.tailCall = this.testTailCall(atn, transition, false);\n\t\t\t\ttransition.optimizedTailCall = this.testTailCall(atn, transition, true);\n\t\t\t}\n\n\t\t\tif (!state.isOptimized) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < state.numberOfOptimizedTransitions; i++) {\n\t\t\t\tlet transition = state.getOptimizedTransition(i);\n\t\t\t\tif (!(transition instanceof RuleTransition)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttransition.tailCall = this.testTailCall(atn, transition, false);\n\t\t\t\ttransition.optimizedTailCall = this.testTailCall(atn, transition, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static testTailCall(atn: ATN, transition: RuleTransition, optimizedPath: boolean): boolean {\n\t\tif (!optimizedPath && transition.tailCall) {\n\t\t\treturn true;\n\t\t}\n\t\tif (optimizedPath && transition.optimizedTailCall) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet reachable: BitSet = new BitSet(atn.states.length);\n\t\tlet worklist: ATNState[] = [];\n\t\tworklist.push(transition.followState);\n\t\twhile (true) {\n\t\t\tlet state = worklist.pop();\n\t\t\tif (!state) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (reachable.get(state.stateNumber)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (state instanceof RuleStopState) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!state.onlyHasEpsilonTransitions) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet transitionCount = optimizedPath ? state.numberOfOptimizedTransitions : state.numberOfTransitions;\n\t\t\tfor (let i = 0; i < transitionCount; i++) {\n\t\t\t\tlet t = optimizedPath ? state.getOptimizedTransition(i) : state.transition(i);\n\t\t\t\tif (t.serializationType !== TransitionType.EPSILON) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tworklist.push(t.target);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprotected static toInt(c: number): number {\n\t\treturn c;\n\t}\n\n\tprotected static toInt32(data: Uint16Array, offset: number): number {\n\t\treturn (data[offset] | (data[offset + 1] << 16)) >>> 0;\n\t}\n\n\tprotected static toUUID(data: Uint16Array, offset: number): UUID {\n\t\tlet leastSigBits: number = ATNDeserializer.toInt32(data, offset);\n\t\tlet lessSigBits: number = ATNDeserializer.toInt32(data, offset + 2);\n\t\tlet moreSigBits: number = ATNDeserializer.toInt32(data, offset + 4);\n\t\tlet mostSigBits: number = ATNDeserializer.toInt32(data, offset + 6);\n\t\treturn new UUID(mostSigBits, moreSigBits, lessSigBits, leastSigBits);\n\t}\n\n\t@NotNull\n\tprotected edgeFactory(\n\t\t@NotNull atn: ATN,\n\t\ttype: TransitionType, src: number, trg: number,\n\t\targ1: number, arg2: number, arg3: number,\n\t\tsets: IntervalSet[]): Transition {\n\t\tlet target: ATNState = atn.states[trg];\n\t\tswitch (type) {\n\t\t\tcase TransitionType.EPSILON: return new EpsilonTransition(target);\n\t\t\tcase TransitionType.RANGE:\n\t\t\t\tif (arg3 !== 0) {\n\t\t\t\t\treturn new RangeTransition(target, Token.EOF, arg2);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn new RangeTransition(target, arg1, arg2);\n\t\t\t\t}\n\t\t\tcase TransitionType.RULE:\n\t\t\t\tlet rt: RuleTransition = new RuleTransition(atn.states[arg1] as RuleStartState, arg2, arg3, target);\n\t\t\t\treturn rt;\n\t\t\tcase TransitionType.PREDICATE:\n\t\t\t\tlet pt: PredicateTransition = new PredicateTransition(target, arg1, arg2, arg3 !== 0);\n\t\t\t\treturn pt;\n\t\t\tcase TransitionType.PRECEDENCE:\n\t\t\t\treturn new PrecedencePredicateTransition(target, arg1);\n\t\t\tcase TransitionType.ATOM:\n\t\t\t\tif (arg3 !== 0) {\n\t\t\t\t\treturn new AtomTransition(target, Token.EOF);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn new AtomTransition(target, arg1);\n\t\t\t\t}\n\t\t\tcase TransitionType.ACTION:\n\t\t\t\tlet a: ActionTransition = new ActionTransition(target, arg1, arg2, arg3 !== 0);\n\t\t\t\treturn a;\n\t\t\tcase TransitionType.SET: return new SetTransition(target, sets[arg1]);\n\t\t\tcase TransitionType.NOT_SET: return new NotSetTransition(target, sets[arg1]);\n\t\t\tcase TransitionType.WILDCARD: return new WildcardTransition(target);\n\t\t}\n\n\t\tthrow new Error(\"The specified transition type is not valid.\");\n\t}\n\n\tprotected stateFactory(type: ATNStateType, ruleIndex: number): ATNState {\n\t\tlet s: ATNState;\n\t\tswitch (type) {\n\t\t\tcase ATNStateType.INVALID_TYPE: return new InvalidState();\n\t\t\tcase ATNStateType.BASIC: s = new BasicState(); break;\n\t\t\tcase ATNStateType.RULE_START: s = new RuleStartState(); break;\n\t\t\tcase ATNStateType.BLOCK_START: s = new BasicBlockStartState(); break;\n\t\t\tcase ATNStateType.PLUS_BLOCK_START: s = new PlusBlockStartState(); break;\n\t\t\tcase ATNStateType.STAR_BLOCK_START: s = new StarBlockStartState(); break;\n\t\t\tcase ATNStateType.TOKEN_START: s = new TokensStartState(); break;\n\t\t\tcase ATNStateType.RULE_STOP: s = new RuleStopState(); break;\n\t\t\tcase ATNStateType.BLOCK_END: s = new BlockEndState(); break;\n\t\t\tcase ATNStateType.STAR_LOOP_BACK: s = new StarLoopbackState(); break;\n\t\t\tcase ATNStateType.STAR_LOOP_ENTRY: s = new StarLoopEntryState(); break;\n\t\t\tcase ATNStateType.PLUS_LOOP_BACK: s = new PlusLoopbackState(); break;\n\t\t\tcase ATNStateType.LOOP_END: s = new LoopEndState(); break;\n\t\t\tdefault:\n\t\t\t\tlet message: string = `The specified state type ${type} is not valid.`;\n\t\t\t\tthrow new Error(message);\n\t\t}\n\n\t\ts.ruleIndex = ruleIndex;\n\t\treturn s;\n\t}\n\n\tprotected lexerActionFactory(type: LexerActionType, data1: number, data2: number): LexerAction {\n\t\tswitch (type) {\n\t\tcase LexerActionType.CHANNEL:\n\t\t\treturn new LexerChannelAction(data1);\n\n\t\tcase LexerActionType.CUSTOM:\n\t\t\treturn new LexerCustomAction(data1, data2);\n\n\t\tcase LexerActionType.MODE:\n\t\t\treturn new LexerModeAction(data1);\n\n\t\tcase LexerActionType.MORE:\n\t\t\treturn LexerMoreAction.INSTANCE;\n\n\t\tcase LexerActionType.POP_MODE:\n\t\t\treturn LexerPopModeAction.INSTANCE;\n\n\t\tcase LexerActionType.PUSH_MODE:\n\t\t\treturn new LexerPushModeAction(data1);\n\n\t\tcase LexerActionType.SKIP:\n\t\t\treturn LexerSkipAction.INSTANCE;\n\n\t\tcase LexerActionType.TYPE:\n\t\t\treturn new LexerTypeAction(data1);\n\n\t\tdefault:\n\t\t\tlet message: string = `The specified lexer action type ${type} is not valid.`;\n\t\t\tthrow new Error(message);\n\t\t}\n\t}\n}\n"]}